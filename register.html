<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <title>REST Client</title>
  </head>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    .container {
      height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    form {
      display: flex;
      flex-direction: column;
      margin-bottom: 20px;
    }
    label,
    input[type="submit"] {
      margin-top: 20px;
    }
  </style>
  <body>
    <div class="container">
      <h1>Register</h1>
      </h1>
      <div class="w3-card-4">
        <div class="w3-container w3-brown">
          <h2>Register</h2>
        </div>
        <form class="w3-container" action="/action_page.php">
          <p>      
          <label class="w3-text-brown"><b>Username</b></label>
          <input class="w3-input w3-border w3-sand" id="name" type="text"></p>
          <p>      
          <label class="w3-text-brown"><b>Email</b></label>
          <input class="w3-input w3-border w3-sand" id="email" type="text"></p>
          <p>      
            <label class="w3-text-brown"><b>Password</b></label>
            <input class="w3-input w3-border w3-sand" id="password" type="text"></p>
          <p>
          <button class="w3-btn w3-brown"  type="submit">Register</button></p>

        </form>
      </div>

      <form>
        <label>User Name</label>
        <input id="name" />
        <label>Email:</label>
        <input id="email" />
        <label>Password</label>
        <input id="password" />
 
        <!-- <input type="submit" value="GetAllUsers"/> -->
      </form>
      <!-- <div class="result">Click Add!</div> -->
    </div>
    <script>
      document.getElementByClassName("w3-btn w3-brown").addEventListener("click", sendData);

      function sendData(e) {
        console.log("im sending data")

        e.preventDefault();
        const usname = document.querySelector("#name").value;
        const mail = document.querySelector("#email").value;
        const passwd = document.querySelector("#password").value;


        const Http = new XMLHttpRequest();
		const url='https://network-cyber-security.herokuapp.com/GetAllUsers';
		
        fetch("https://network-cyber-security.herokuapp.com/Register", {
          method: "POST",
          headers: {
            Accept: "application/json",
            "Content-Type": "application/json",
            "Connection":"keep-alive",
          },
          body: JSON.stringify({
            password: passwd,
            username: usname,
            email: mail
          })
        })
          .then(res => res.json())
          .then(data => console.log(data))
          .catch(err => console.log(err));
      }

		var myHeaders = new Headers();
		myHeaders.append("Content-Type", "application/json");

		var requestOptions = {
		  method: 'GET',
		  headers: myHeaders,
		  redirect: 'follow'
		};

		// fetch("https://network-cyber-security.herokuapp.com/Login/Pelled/Pelled@1", requestOptions)
		//   .then(response => response.text())
		//   .then(result => console.log(result))
		//   .catch(error => console.log('error', error));


      // document.addEventListener("get_users", sendData);
      // function sendData(e) {
      //   e.preventDefault();

      //   fetch("https://network-cyber-security.herokuapp.com/GetAllUsers", {
      //     method: "GET",
      //     headers: {
      //       Accept: "application/json",
      //       "Content-Type": "application/json",
      //       "Connection":"keep-alive",
      //       'Access-Control-Allow-Origin':'*'
      //     }
      //    })
      //     .then(res => res.json())
      //     .then(data => console.log(data))
      //     .catch(err => console.log(err));
      // }
    </script>
  </body>
</html>